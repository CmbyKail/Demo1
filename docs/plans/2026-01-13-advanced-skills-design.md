# 情商训练系统 - 高级技能模块扩展设计

**设计日期**: 2026-01-13
**设计师**: Claude Code
**项目**: 情商训练营 (EQ Trainer)

---

## 📋 目录

1. [架构设计概述](#架构设计概述)
2. [四大模块详细设计](#四大模块详细设计)
3. [数据结构与数据流](#数据结构与数据流)
4. [UI/UX设计](#uiux设计)
5. [实施计划与技术要点](#实施计划与技术要点)

---

## 架构设计概述

### 核心定位

在现有6大场景类别基础上，新增4个独立的高级技能训练模块，每个模块采用"理论框架→分解练习→实战演练"的三步训练法。

### 新增模块

1. **💬 幽默表达训练场** - 学习幽默机制，掌握搞笑技巧
2. **⚔️ 高情商反击** - 骂人不带脏字，优雅地回击
3. **💪 影响力与说服** - 健康的PUA技巧（销售/恋爱/职场）
4. **🛡️ 反操纵与拒绝** - 识别PUA，建立边界，优雅说"不"

### 技术架构

- **前端**: 新增4个独立View（类似现有的welcome/training/feedback视图）
- **数据模型**: 每个模块包含"理论课+练习题库+实战场景"三层数据
- **AI评分系统**: 针对不同技能设计专门的评分维度
- **进度追踪**: 独立的技能树和成就系统

### 与现有系统的关系

- 主页新增"高级技能训练入口"卡片
- 复用现有的用户系统、API配置、LocalStorage存储
- 独立的能力雷达图维度

---

## 四大模块详细设计

### 1️⃣ 💬 幽默表达训练场

#### 理论框架（3个核心机制）

- **意外性机制**: 打破预期（铺垫→反转）
- **共情机制**: 自嘲、观察式幽默
- **语言技巧**: 夸张、比喻、双关、谐音

#### 训练流程

1. **理论课**: 动画/图文讲解机制原理（5分钟）
2. **分解练习**:
   - 补全句子（如"老板说要加班，你半开玩笑地说：_____"）
   - 改写练习（把严肃话改成幽默话）
   - 幽默技巧配对游戏
3. **实战演练**: 多轮对话场景（聚会破冰、化解尴尬、活跃气氛）

#### AI评分维度

- 意外性 (30%)
- 适切性 (25%)
- 创意性 (25%)
- 表达自然度 (20%)

---

### 2️⃣ ⚔️ 高情商反击

#### 理论框架（4个反击层级）

- **Lv1 柔性化解**: 幽默回应、装傻充愣
- **Lv2 借力打力**: 用对方逻辑反击
- **Lv3 降维打击**: 揭露本质但不带脏字
- **Lv4 绝杀无言**: 一句话让对方闭嘴

#### 训练流程

1. **理论课**: 展示真实案例的"反击前后对比"
2. **分解练习**:
   - 识别攻击类型（嘲讽、打压、阴阳怪气）
   - 选择反击等级（系统给出场景，用户选择策略）
   - 补全反击金句
3. **实战演练**: AI扮演"杠精/控制欲强的人"，用户进行反击对话

#### AI评分维度

- 回击精准度 (35%)
- 情绪控制 (25%)
- 语言优雅度 (25%)
- 战略高度 (15%)

---

### 3️⃣ 💪 影响力与说服

#### 理论框架（CIALD模型）

- **C**ommitment 承诺一致
- **I**nfluence 社会认同
- **A**uthority 权威效应
- **L**iking 喜好原则
- **D**arity 稀缺性
- **E**motional 情感共鸣

#### 训练流程

1. **理论课**: 每个原则配真实商业/恋爱案例
2. **分解练习**:
   - 识别场景中使用了哪个原则
   - 给定目标，设计说服策略
   - 话术填空（运用特定原则）
3. **实战演练**: 销售谈判、约会表白、职场游说的多轮对话

#### AI评分维度

- 策略运用 (40%)
- 逻辑性 (25%)
- 情感共鸣 (20%)
- **伦理边界 (15%)** ⚠️

**重要**: 系统会持续提醒"影响力≠操纵"，并检测越界行为

---

### 4️⃣ 🛡️ 反操纵与拒绝

#### 理论框架（5大操纵模式识别）

- **煤气灯效应** Gaslighting - 质疑你的记忆/理智
- **Guilt-tripping** 道德绑架 - 让你感到内疚
- **Love bombing** 爱情轰炸 - 过度好意后控制
- **Negging** 打压式赞美 - 先贬后褒
- **Moving goalposts** 移动目标 - 永远不够好

#### 训练流程

1. **理论课**: 展示操纵对话的"标注版"（指出哪句话是操纵）
2. **分解练习**:
   - 识别操纵模式（给对话，用户选类型）
   - 拆解操纵手法（圈出具体语句）
   - 设计拒绝话术（用"我字句"建立边界）
3. **实战演练**: AI扮演操纵者，用户练习识别和拒绝

#### AI评分维度

- 识别准确度 (35%)
- 拒绝坚定度 (30%)
- 表达技巧 (20%)
- 自我保护意识 (15%)

---

## 数据结构与数据流

### 核心数据模型

```json
{
  "skillModules": {
    "幽默表达": {
      "id": "humor",
      "theoryLessons": [
        {
          "id": "humor_01",
          "title": "意外性机制：铺垫与反转",
          "content": "...",
          "examples": [
            {
              "bad": "今天地铁好挤",
              "good": "今天地铁挤到我跟陌生人不仅是熟人，还差点交换了DNA"
            }
          ]
        }
      ],
      "exercises": [
        {
          "id": "humor_ex_01",
          "type": "complete_sentence",
          "prompt": "老板说要加班，你半开玩笑地说：",
          "answer": "...",
          "skill": ["意外性", "夸张"]
        }
      ],
      "scenarios": [...]
    }
  }
}
```

### 数据流设计

#### 学习流程数据流

```
用户点击模块 → 加载理论课列表 → 用户选择课程 → 显示课程内容
→ 标记课程为"已学习" → 解锁对应练习 → 进入练习界面
```

#### 练习流程数据流

```
选择练习类型 → 随机抽取题目 → 用户提交答案
→ AI评分 + 详细反馈 → 保存到本地历史
→ 更新技能进度条 → 建议：薄弱点推荐
```

#### 实战对话数据流

```
进入实战模式 → 加载场景 → AI角色初始化
→ 多轮对话（用户输入 → AI回应 + 实时提示）
→ 用户主动结束 → AI综合评估 → 显示成长报告
```

### LocalStorage数据结构

```javascript
{
  "skillProgress": {
    "humor": {
      "completedLessons": ["humor_01", "humor_02"],
      "exerciseScores": { "humor_ex_01": 85 },
      "scenarioCount": 5,
      "averageScore": 78,
      "level": 2,
      "xp": 350
    },
    "retaliation": {...},
    "influence": {...},
    "anti_pua": {...}
  },
  "skillHistory": [
    {
      "date": "2026-01-13",
      "module": "humor",
      "type": "exercise",
      "score": 85,
      "details": {...}
    }
  ]
}
```

### API交互设计

#### 新增2个专用Prompt模板

**1. 评分Prompt（练习题用）**

```
你是一个{skill}专家。评估用户的回答：{userAnswer}
评分维度：{dimensions}
返回JSON：{
  "score": 0-100,
  "dimensionScores": {...},
  "feedback": "...",
  "suggestion": "...",
  "exampleAnswer": "..."
}
```

**2. 对话Prompt（实战模式用）**

```
角色：{role}
场景：{scenario}
任务：与用户进行多轮对话，实时评估用户的{skill}表现。
每轮回复包含：
{
  "reply": "你的回应",
  "realtimeFeedback": "即时反馈（可选）",
  "manipulationAlert": "警告（如有操纵行为）"
}
```

---

## UI/UX设计

### 主界面调整

在现有主页的"场景类别"下方，新增一个**"🚀 高级技能训练"**区域：

```
┌─────────────────────────────────────────┐
│  🎓 场景训练                              │
│  [💼职场] [❤️情感] [👨‍👩‍👧‍👦家庭] ...        │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│  🚀 高级技能训练（新功能）                 │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │
│  │ 💬   │ │ ⚔️  │ │ 💪  │ │ 🛡️  │    │
│  │ 幽默 │ │ 反击 │ │ 影响力│ │ 反操纵│    │
│  │ Lv.2 │ │ Lv.1│ │ Lv.1│ │ Lv.1│    │
│  │ [▓▓░]│ │ [▓░]│ │ [▓░]│ │ [▓░]│    │
│  └──────┘ └──────┘ └──────┘ └──────┘    │
└─────────────────────────────────────────┘
```

点击任一模块卡片，进入该模块的**专属训练界面**。

### 技能模块专属界面设计

**三Tab布局**：

```
┌─────────────────────────────────────────┐
│  💬 幽默表达训练                          │
│  [📚 理论] [✏️ 练习] [🎮 实战]             │
├─────────────────────────────────────────┤
│                                         │
│  内容区域（根据Tab切换）                  │
│                                         │
└─────────────────────────────────────────┘
```

#### 📚 理论课Tab

- 左侧：课程列表（带进度标记 ✓）
- 右侧：课程内容展示（图文+动画示例）
- 底部："[开始练习]"按钮

#### ✏️ 练习Tab

```
┌─────────────────────────────────────────┐
│  练习 3/15 ━━━●━━━━━━━━━━━             │
│                                         │
│  题目：补全句子让它更幽默                 │
│  "老板说要加班，你半开玩笑地说："         │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 你的答案...                      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [💡 提示]  [提交答案]                   │
└─────────────────────────────────────────┘
```

#### 🎮 实战Tab

- 类似现有的聊天界面，但增加：
  - **实时反馈浮标**: AI回复时弹出小气泡"👍 这个比喻很幽默！"
  - **技能雷达**: 右上角显示本轮表现
  - **操纵警告**（仅影响力模块）: 检测到越界行为时显示警告

### 视觉设计语言

#### 保持现有风格

- 继续使用Claymorphism（粘土拟态）卡片设计
- 复用现有CSS变量（颜色、圆角、阴影）

#### 新增视觉元素

**技能进度条**: 渐变色
- 幽默 = 橙黄 (#FF9800 → #FFC107)
- 反击 = 红紫 (#E91E63 → #9C27B0)
- 影响力 = 蓝青 (#2196F3 → #00BCD4)
- 反操纵 = 绿青 (#4CAF50 → #009688)

**成就徽章**: 模块专属徽章设计
- 幽默: "😂 快乐源泉"
- 反击: "🎯 优雅回击"
- 影响力: "🌟 影响力大师"
- 反操纵: "🛡️ 边界守护者"

### 交互设计细节

1. **解锁机制**: 必须完成理论课才能解锁练习，完成80%练习才能解锁实战
2. **即时反馈**: 练习提交后2秒内显示评分（loading动画）
3. **成就通知**: 解锁新成就时从顶部弹出toast通知
4. **智能推荐**: 在主页显示"今日推荐技能"（基于薄弱项）

---

## 实施计划与技术要点

### 开发阶段划分

#### Phase 1：基础架构（1周）

- 创建4个新View的HTML结构
- 扩展`app.js`的路由系统，支持技能模块导航
- 设计新的数据模型并扩展现有的`localStorage`管理
- 创建新的CSS组件（技能卡片、进度条、Tab切换）

#### Phase 2：幽默模块开发（1.5周）

作为第一个完整模块：
- 实现3个理论课的内容和UI
- 开发补全句子、改写练习、配对游戏3种练习类型
- 实现多轮对话实战模式
- 设计并测试幽默评分Prompt

#### Phase 3：其他3个模块（2-2.5周）

- 复用幽默模块的代码框架
- 分别填充反击、影响力、反操纵的内容
- 为每个模块定制评分维度和Prompt
- 影响力模块增加"操纵检测"功能

#### Phase 4：整合与优化（1周）

- 主页集成技能卡片入口
- 统一的技能进度追踪系统
- 全新能力雷达图（从6维扩展到10维）
- 成就系统完善
- 全面测试与bug修复

**总计：5.5-6周**

---

### 关键技术挑战与解决方案

#### 挑战1：AI评分的一致性

**问题**: 同一答案，不同轮次评分可能差异大

**解决**: 在Prompt中加入详细评分标准和示例，使用`temperature=0.3`降低随机性

#### 挑战2：多轮对话的上下文管理

**问题**: 实战模式下需要记住对话历史

**解决**: 维护一个对话数组，每次API调用带上最近5轮历史

#### 挑战3：操纵行为的检测

**问题**: 如何AI判断用户是否在"操纵"？

**解决**: 预设30+个"红线模式"，AI检测到匹配时触发警告并扣分

#### 挑战4：数据持久化

**问题**: LocalStorage有5MB限制

**解决**: 只存储核心数据（进度、最近50条历史），理论内容放在`server_data.json`

---

### 测试计划

1. **单元测试**: 每个练习类型的逻辑验证
2. **AI评分测试**: 准备10组标准答案，测试评分稳定性
3. **用户测试**: 邀请3-5人试用，收集反馈
4. **边界测试**: 极端输入、网络错误、数据清理

---

### 未来扩展方向

1. **语音输入**: 幽默和反击模块支持语音练习
2. **社交功能**: 用户可以分享自己的"神回复"
3. **大师课程**: 邀请心理学专家录制视频课程
4. **多语言支持**: 英文版本

---

## 设计文档总结

本次设计为情商训练系统新增4个高级技能模块：

- 💬 幽默表达训练
- ⚔️ 高情商反击
- 💪 影响力与说服
- 🛡️ 反操纵与拒绝

采用"理论→练习→实战"三步训练法，每个模块独立完整，既复用现有技术栈，又提供了更系统的学习体验。

**核心价值主张**：
- 系统化的技能训练路径
- 理论与实践相结合
- 健康的价值观引导（影响力≠操纵）
- 可量化的成长追踪

---

*文档版本: 1.0*
*最后更新: 2026-01-13*
